const l=()=>(localStorage.getItem("cart")||localStorage.setItem("cart",JSON.stringify({items:[],totalItems:0,subtotal:0})),r()),r=()=>{const t=localStorage.getItem("cart");return t?JSON.parse(t):{items:[],totalItems:0,subtotal:0}},n=t=>(localStorage.setItem("cart",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("cart-updated",{detail:t})),t),u=(t,s=1)=>{const e=r();console.log(e,"cart"),e.items||(e.items=[]);const i=e.items.findIndex(a=>a.id===t.id);return i>=0?e.items[i].quantity+=s:e.items.push({id:t.id,name:t.name,price:t.discount_price||t.price,image:t.gallery[0],quantity:s}),o(e),n(e)},m=t=>{const s=r();return s.items?(s.items=s.items.filter(e=>e.id!==t),o(s),n(s)):(s.items=[],n(s))},c=(t,s)=>{const e=r();if(!e.items)return e.items=[],n(e);const i=e.items.findIndex(a=>a.id===t);return i>=0?s<=0?m(t):(e.items[i].quantity=s,o(e),n(e)):e},o=t=>t.items?(t.totalItems=t.items.reduce((s,e)=>s+e.quantity,0),t.subtotal=t.items.reduce((s,e)=>s+e.price*e.quantity,0),t):(t.items=[],t.totalItems=0,t.subtotal=0,t),d=t=>`â‚¹${t.toLocaleString()}`;export{u as a,d as f,r as g,l as i,m as r,c as u};
